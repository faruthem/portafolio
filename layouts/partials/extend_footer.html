<script>
document.querySelectorAll('pre > code').forEach((codeBlock) => {
    // Buscar el contenedor principal del código
    const container = codeBlock.parentNode.parentNode;
    
    // Crear el botón
    const copyButton = document.createElement('button');
    copyButton.classList.add('copy-button');
    copyButton.innerText = 'Copiar';
    
    // Darle estilo de interfaz moderna
    copyButton.style.position = 'absolute';
    copyButton.style.right = '10px';
    copyButton.style.top = '10px';
    copyButton.style.padding = '4px 8px';
    copyButton.style.fontSize = '12px';
    copyButton.style.fontFamily = "'Inter', sans-serif";
    copyButton.style.backgroundColor = '#89b4fa';
    copyButton.style.color = '#11111b';
    copyButton.style.border = 'none';
    copyButton.style.borderRadius = '4px';
    copyButton.style.cursor = 'pointer';
    copyButton.style.fontWeight = 'bold';
    copyButton.style.opacity = '0.8';
    copyButton.style.transition = 'opacity 0.2s';

    // Efecto hover simple
    copyButton.onmouseover = () => copyButton.style.opacity = '1';
    copyButton.onmouseout = () => copyButton.style.opacity = '0.8';

    // Necesario para que el botón se coloque en la esquina superior
    container.style.position = 'relative'; 
    container.appendChild(copyButton);

    // Lógica para copiar al portapapeles
    copyButton.addEventListener('click', () => {
        navigator.clipboard.writeText(codeBlock.innerText).then(() => {
            copyButton.innerText = '¡Copiado!';
            copyButton.style.backgroundColor = '#a6e3a1'; // Cambia a verde
            
            // Volver a la normalidad después de 2 segundos
            setTimeout(() => {
                copyButton.innerText = 'Copiar';
                copyButton.style.backgroundColor = '#89b4fa'; // Vuelve a azul
            }, 2000);
        });
    });
});
</script>
